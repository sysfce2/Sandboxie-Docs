# 模拟管理员权限

**模拟管理员权限** 是 [Sandboxie Ini](SandboxieIni.md) 配置文件中的一个沙箱设置，自 0.7.1 / 5.48.5 版本起可用。 它指定 Sandboxie 是否为在此沙箱中运行的程序模拟管理员权限。

## 语法

```ini
FakeAdminRights=[process,]y|n
```

* **进程名** (可选): 适用于此规则的可执行文件名。 如果省略，则该规则适用于沙箱中的所有应用程序。
* **y|n**:

    - `y` 为指定进程（如果未指定进程，则为所有进程）启用模拟管理员权限
    - `n` 为指定进程禁用模拟管理员权限


建议此选项与 [撤销管理员权限](DropAdminRights.md) 结合使用以提高安全性。大多数安装程序在同时启用这两个选项的情况下仍应能正常工作。

## 使用示例

### 1. 为所有沙箱化程序启用模拟管理员权限

这会使沙箱中的所有应用程序都认为它们拥有管理员权限：

```ini
[DefaultBox]
FakeAdminRights=y
```

### 2. 为特定的安装程序启用模拟管理员权限

某些安装程序需要管理员权限才能继续。以下配置仅授予 `installer.exe` 模拟管理员权限，而其他程序则正常运行：

```ini
[DefaultBox]
FakeAdminRights=installer.exe,y
```

### 3. 全局启用模拟管理员权限，但对某些安全敏感的程序禁用

此配置为除 `CredentialUIBroker.exe` 等安全敏感程序之外的所有程序提供模拟管理员权限：

```ini
[DefaultBox]
FakeAdminRights=y
FakeAdminRights=CredentialUIBroker.exe,n
```

### 4. 使用否定，即感叹号 (!) 来反转规则

使用 `!` 来反转规则的逻辑。这对于创建例外特别有用：

```ini
[DefaultBox]
FakeAdminRights=!Start.exe,y
```

这意味着：给予除 `Start.exe` 之外的所有程序启用模拟管理员权限


以上这些示例演示了：
1. 启用全局模拟管理员权限
2. 针对特定应用程序启用模拟管理员权限
3. 用于与安全敏感程序兼容的一种混合方法
4. 使用否定来实现基于例外的规则

第三个示例在 “大多数程序需要提升权限，但某些系统组件必须以真实权限运行才能正常工作” 时特别有用。

### 模拟管理员权限的作用是什么？

当 **模拟管理员** 启用时:

- 沙箱化进程会被“欺骗”，使其认为自己正在以管理员权限运行。
- 这对于测试或运行需要管理员权限的应用程序非常有用，而无需授予它们真实的管理员权限。
- 它有助于提高那些会检查管理员权限但实际功能并不真正需要这些权限的程序的兼容性。


## 相关配置

此设置对应于 **Sandboxie Plus** 图形用户界面（GUI）中的以下路径选项：

**沙箱选项** > **安全选项** > **提权限制**: _使应用程序认为自己已被提权运行（允许安全地运行安装程序)_

**沙箱选项** > **高级选项** > **杂项** > **添加选项**: _FakeAdminRights_
